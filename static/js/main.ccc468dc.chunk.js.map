{"version":3,"sources":["components/MovieItem.jsx","utils/api.js","components/MovieTabs.jsx","components/Pagination.jsx","components/App.jsx","index.js"],"names":["MovieItem","React","Component","constructor","props","super","this","state","willWatch","render","_this$props","movie","removeMovie","addMovieToWillWatch","removeMovieFromWillWatch","react_default","a","createElement","className","style","width","src","concat","backdrop_path","poster_path","alt","title","vote_average","type","onClick","setState","bind","API_URL","API_KEY_3","MovieTabs","componentWillReceiveProps","nextProps","nextState","console","log","sort_by","shouldComponentUpdate","updateSortBy","handleClick","value","getClassLink","cn","active","href","Pagination","page","total_pages","paginateBack","paginateNext","MoviesList","getMovies","fetch","then","data","json","resp","movies","results","updateMovies","filter","item","id","moviesWillWatch","updateMoviesWillWatch","componentDidMount","componentDidUpdate","prevProps","prevState","components_MovieTabs","map","key","MovieItem_MovieItem","length","App","App_MoviesList","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.ccc468dc.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default class MovieItem extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      willWatch: false\n    }\n  }\n\n  render() {\n    const { movie, removeMovie, addMovieToWillWatch, removeMovieFromWillWatch } = this.props;\n\n    return (\n      <div className=\"card\" style={{ width: \"100%\" }}>\n        <img\n          className=\"card-img-top card-img--height\"\n          src={`https://image.tmdb.org/t/p/w500${\n            movie.backdrop_path || movie.poster_path\n            }`}\n          alt=\"\"\n        />\n        <div className=\"card-body\">\n          <h6 className=\"card-title\">{movie.title}</h6>\n          <div className=\"d-flex justify-content-between align-items-center\">\n            <p className=\"mb-0\">Рейтинг: {movie.vote_average}</p>\n            {this.state.willWatch ? (\n              <button\n                type=\"button\"\n                className=\"btn btn-success\"\n                onClick={() => {\n                  this.setState({\n                    willWatch: false\n                  });\n                  removeMovieFromWillWatch(movie);\n                }}\n              >\n                Remove Will Watch\n              </button>\n            ) : (\n                <button\n                  type=\"button\"\n                  className=\"btn btn-secondary\"\n                  onClick={() => {\n                    this.setState({\n                      willWatch: true\n                    });\n                    addMovieToWillWatch(movie);\n                  }}\n                >\n                  Add Will Watch\n              </button>\n              )}\n          </div>\n          <button onClick={removeMovie.bind(null, movie)}>Remove movie</button>\n        </div>\n      </div>\n    );\n  }\n}\n\n","export const API_URL = \"https://api.themoviedb.org/3\";\n\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\n\nexport const API_KEY_4 =\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\n","import React from \"react\"\nimport cn from 'classnames'\n\nclass MovieTabs extends React.Component {\n  componentWillReceiveProps(nextProps, nextState) {\n    console.log(\"willReceiveProps\");\n    console.log(\"nextProps sort_by\", nextProps.sort_by);\n    console.log(\"prevProps sort_by\", this.props.sort_by);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (nextProps.sort_by !== this.props.sort_by) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    const { sort_by, updateSortBy } = this.props;\n\n    const handleClick = value => {\n      return () => {\n        updateSortBy(value);\n      };\n    };\n\n    const getClassLink = value => {\n      //return `nav-link ${sort_by === value ? \"active\" : \"\"}`;\n\n      // или используем бииблиотеку classnames\n      return cn(\"nav-link\", {\"active\": sort_by === value});\n    }\n\n    console.log(\"MovieTabs render\")\n\n    return (\n      <ul className=\"nav nav-pills\">\n        <li className=\"nav-item\">\n          <a\n            className={getClassLink(\"popularity.desc\")}\n            onClick={handleClick(\"popularity.desc\")}\n            href=\"#stub\"\n          >\n            Popularity desc\n        </a>\n        </li>\n        <li className=\"nav-item\">\n          <a\n            className={getClassLink(\"revenue.desc\")}\n            onClick={handleClick(\"revenue.desc\")}\n            href=\"#stub\"\n          >\n            Revenue desc\n        </a>\n        </li>\n        <li className=\"nav-item\">\n          <a\n            className={`nav-link ${\n              sort_by === \"vote_average.desc\" ? \"active\" : \"\"}`}\n            onClick={() => {\n              updateSortBy(\"vote_average.desc\");\n            }}\n            href=\"#stub\"\n          >\n            Vote average desc\n        </a>\n        </li>\n      </ul>\n    )\n  }\n}\n\nexport default MovieTabs;\n","import React from \"react\";\n\nexport default function Pagination(props) {\n  const {\n    page,\n    total_pages,\n    paginateBack,\n    paginateNext} = props;\n\n  return (\n    <div className=\"row mb-4 mt-4\">\n      <div className=\"col-6 align-self-center\">\n        <span className=\"float-right\">\n          Total pages: {total_pages}, Current page: {page}\n        </span>\n      </div>\n      <div className=\"col-6\">\n        <button\n          className=\"btn btn-primary mr-2\"\n          onClick={paginateBack}\n        >\n          Back\n        </button>\n        <button\n          className=\"btn btn-primary mr-2\"\n          onClick={paginateNext}\n        >\n          Next\n        </button>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\";\nimport \"../styles.scss\";\n//import { moviesData } from \"../moviesData\";\nimport MovieItem from \"./MovieItem\";\nimport { API_URL, API_KEY_3 } from \"../utils/api\";\nimport MovieTabs from \"./MovieTabs\";\nimport Pagination from \"./Pagination\";\n\n// UI = fn(state, props)\n\nclass MoviesList extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      movies: [],//moviesData\n      moviesWillWatch: [],\n      sort_by: \"revenue.desc\",\n      total_pages: 0,\n      page: 1\n    };\n\n    //this.removeMovie = this.removeMovie.bind(this);\n    console.log('constructor')\n  }\n\n  componentDidMount() {\n    //const _this = this\n    console.log('App didmount')\n\n    this.getMovies();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log(\"App didupdate\")\n    console.log(\"prev\", prevProps, prevState)\n    console.log(\"this\", this.props, this.state)\n    if (prevState.sort_by !== this.state.sort_by) {\n      this.getMovies();\n    }\n  }\n\n  /* async */ getMovies = () => {\n    //const _this = this\n    fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`).then(data => {\n      return data.json()\n      //}).then(function(resp) {\n    }).then(resp => {\n      console.log(resp)\n      this.setState({\n        total_pages: resp.total_pages,\n        movies: resp.results\n      })\n    })\n\n    //или так\n\n    // let promise = await fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}`);\n    // let json = await promise.json()\n    // //console.log(json);\n    // this.setState({\n    //   movies: json.results\n    // })\n  }\n\n  //removeMovie(movie) { или через arrow function\n  removeMovie = movie => {\n    const updateMovies = this.state.movies.filter(function (item) {\n      return item.id !== movie.id;\n    });\n\n    this.setState({\n      movies: updateMovies,\n    });\n  };\n\n  addMovieToWillWatch = movie => {\n    // const updateMovies = [...this.state.moviesWillWatch];\n    // updateMovies.push(movie); или\n\n    const updateMovies = [...this.state.moviesWillWatch, movie];\n\n    this.setState({\n      moviesWillWatch: updateMovies\n    });\n  };\n\n  removeMovieFromWillWatch = movie => {\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(function (item) {\n      return item.id !== movie.id;\n    });\n\n    this.setState({\n      moviesWillWatch: updateMoviesWillWatch,\n    });\n  };\n\n  updateSortBy = value => {\n    this.setState({\n      sort_by: value\n    });\n  }\n\n  paginateBack = () => {\n    if (this.state.page > 1) {\n      this.setState(\n        (state, props) => {\n          return { page: --state.page }\n        },\n        () => this.getMovies()\n      )\n    }\n  }\n\n  paginateNext = () => {\n    if (this.state.page < this.state.total_pages) {\n      this.setState(\n        (state, props) => {\n          return { page: ++state.page }\n        },\n        () => this.getMovies()\n      )\n    }\n  }\n\n  render() {\n    console.log('App render')\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-9\">\n            <div className=\"row mb-4 mt-4\">\n              <div className=\"col-12\">\n                <MovieTabs\n                  sort_by={this.state.sort_by}\n                  updateSortBy={this.updateSortBy}\n                />\n              </div>\n            </div>\n            <div className=\"row\">\n              {this.state.movies.map(movie => {\n                return (\n                  <div className=\"col-6 mb-4\" key={movie.id}>\n                    <MovieItem\n                      movie={movie}\n                      removeMovie={this.removeMovie}\n                      addMovieToWillWatch={this.addMovieToWillWatch}\n                      removeMovieFromWillWatch={this.removeMovieFromWillWatch}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n            <Pagination\n              page={this.state.page}\n              total_pages={this.state.total_pages}\n              paginateBack={this.paginateBack}\n              paginateNext={this.paginateNext}\n            />\n          </div>\n          <div className=\"col-3\">\n            <p>Will watch: {this.state.moviesWillWatch.length}</p>\n          </div>\n        </div>\n      </div >\n    );\n  }\n}\n\nexport default function App() {\n  return <MoviesList />;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}