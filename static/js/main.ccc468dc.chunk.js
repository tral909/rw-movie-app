(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){"use strict";a.r(t);var s=a(0),o=a.n(s),i=a(2),l=a.n(i);a(9);class c extends o.a.Component{constructor(e){super(e),this.state={willWatch:!1}}render(){const e=this.props,t=e.movie,a=e.removeMovie,s=e.addMovieToWillWatch,i=e.removeMovieFromWillWatch;return o.a.createElement("div",{className:"card",style:{width:"100%"}},o.a.createElement("img",{className:"card-img-top card-img--height",src:"https://image.tmdb.org/t/p/w500".concat(t.backdrop_path||t.poster_path),alt:""}),o.a.createElement("div",{className:"card-body"},o.a.createElement("h6",{className:"card-title"},t.title),o.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},o.a.createElement("p",{className:"mb-0"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",t.vote_average),this.state.willWatch?o.a.createElement("button",{type:"button",className:"btn btn-success",onClick:()=>{this.setState({willWatch:!1}),i(t)}},"Remove Will Watch"):o.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:()=>{this.setState({willWatch:!0}),s(t)}},"Add Will Watch")),o.a.createElement("button",{onClick:a.bind(null,t)},"Remove movie")))}}const n="https://api.themoviedb.org/3",r="3f4ca4f3a9750da53450646ced312397";var m=a(3),p=a.n(m);var h=class extends o.a.Component{componentWillReceiveProps(e,t){console.log("willReceiveProps"),console.log("nextProps sort_by",e.sort_by),console.log("prevProps sort_by",this.props.sort_by)}shouldComponentUpdate(e,t){return e.sort_by!==this.props.sort_by}render(){const e=this.props,t=e.sort_by,a=e.updateSortBy,s=e=>()=>{a(e)},i=e=>p()("nav-link",{active:t===e});return console.log("MovieTabs render"),o.a.createElement("ul",{className:"nav nav-pills"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:i("popularity.desc"),onClick:s("popularity.desc"),href:"#stub"},"Popularity desc")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:i("revenue.desc"),onClick:s("revenue.desc"),href:"#stub"},"Revenue desc")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("a",{className:"nav-link ".concat("vote_average.desc"===t?"active":""),onClick:()=>{a("vote_average.desc")},href:"#stub"},"Vote average desc")))}};function v(e){const t=e.page,a=e.total_pages,s=e.paginateBack,i=e.paginateNext;return o.a.createElement("div",{className:"row mb-4 mt-4"},o.a.createElement("div",{className:"col-6 align-self-center"},o.a.createElement("span",{className:"float-right"},"Total pages: ",a,", Current page: ",t)),o.a.createElement("div",{className:"col-6"},o.a.createElement("button",{className:"btn btn-primary mr-2",onClick:s},"Back"),o.a.createElement("button",{className:"btn btn-primary mr-2",onClick:i},"Next")))}class d extends o.a.Component{constructor(){super(),this.getMovies=(()=>{fetch("".concat(n,"/discover/movie?api_key=").concat(r,"&sort_by=").concat(this.state.sort_by,"&page=").concat(this.state.page)).then(e=>e.json()).then(e=>{console.log(e),this.setState({total_pages:e.total_pages,movies:e.results})})}),this.removeMovie=(e=>{const t=this.state.movies.filter(function(t){return t.id!==e.id});this.setState({movies:t})}),this.addMovieToWillWatch=(e=>{const t=[...this.state.moviesWillWatch,e];this.setState({moviesWillWatch:t})}),this.removeMovieFromWillWatch=(e=>{const t=this.state.moviesWillWatch.filter(function(t){return t.id!==e.id});this.setState({moviesWillWatch:t})}),this.updateSortBy=(e=>{this.setState({sort_by:e})}),this.paginateBack=(()=>{this.state.page>1&&this.setState((e,t)=>({page:--e.page}),()=>this.getMovies())}),this.paginateNext=(()=>{this.state.page<this.state.total_pages&&this.setState((e,t)=>({page:++e.page}),()=>this.getMovies())}),this.state={movies:[],moviesWillWatch:[],sort_by:"revenue.desc",total_pages:0,page:1},console.log("constructor")}componentDidMount(){console.log("App didmount"),this.getMovies()}componentDidUpdate(e,t){console.log("App didupdate"),console.log("prev",e,t),console.log("this",this.props,this.state),t.sort_by!==this.state.sort_by&&this.getMovies()}render(){return console.log("App render"),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-9"},o.a.createElement("div",{className:"row mb-4 mt-4"},o.a.createElement("div",{className:"col-12"},o.a.createElement(h,{sort_by:this.state.sort_by,updateSortBy:this.updateSortBy}))),o.a.createElement("div",{className:"row"},this.state.movies.map(e=>o.a.createElement("div",{className:"col-6 mb-4",key:e.id},o.a.createElement(c,{movie:e,removeMovie:this.removeMovie,addMovieToWillWatch:this.addMovieToWillWatch,removeMovieFromWillWatch:this.removeMovieFromWillWatch})))),o.a.createElement(v,{page:this.state.page,total_pages:this.state.total_pages,paginateBack:this.paginateBack,paginateNext:this.paginateNext})),o.a.createElement("div",{className:"col-3"},o.a.createElement("p",null,"Will watch: ",this.state.moviesWillWatch.length))))}}function g(){return o.a.createElement(d,null)}a(10);l.a.render(o.a.createElement(g,null),document.getElementById("root"))},4:function(e,t,a){e.exports=a(11)},9:function(e,t,a){}},[[4,1,2]]]);
//# sourceMappingURL=main.ccc468dc.chunk.js.map